<!DOCTYPE html>
<html>
<head>

	<title></title>
	<link rel="stylesheet" type="text/css" href="/pcd-delhi-workshop/style/main.css">
	<link rel="stylesheet" type="text/css" href="/pcd-delhi-workshop/style/highlighter.css">
	<script type="text/javascript" src="/pcd-delhi-workshop/scripts/prefixfree.min.js"></script>
</head>
<body>

	<link rel="stylesheet" type="text/css" href="/pcd-delhi-workshop/style/topbar.css">
<div id="topbar">
	<div id="links">
		<a href="/pcd-delhi-workshop/">home</a>
		<span>|</span>
		<a href="/pcd-delhi-workshop/syllabus">workshop</a>
	</div>
	<div id="bar">
		
			<span></span>
		
			<span></span>
		
			<span></span>
		
			<span></span>
		
			<span></span>
		
			<span></span>
		
			<span></span>
		
			<span></span>
		
			<span></span>
		
			<span></span>
		
			<span></span>
		
			<span></span>
		
			<span></span>
		
			<span></span>
		
			<span></span>
		
			<span></span>
		
			<span></span>
		
			<span></span>
		
			<span></span>
		
			<span></span>
		
	</div>
</div>


	<h1></h1>

	<ul>
  <li>Getting up and running in Javascript.</li>
  <li>Developer Tools
    <ul>
      <li>debugger</li>
    </ul>
  </li>
  <li>Basics of Web Audio API.</li>
  <li>Intro to Tone.js</li>
</ul>

<h2 id="javascript">JAVASCRIPT</h2>

<h3 id="numbers">Numbers</h3>

<p>Numbers in Javascript are 64-bit floating point. There are no integers.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>var numbo = 10000000000000000;
</code></pre></div></div>

<p>Advantages - no overflows or floating-point errors. high precision.</p>

<p>Disadvantages - performance, memory.</p>

<p><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number">Reference</a></p>

<h3 id="strings">Strings</h3>

<p>Strings are defined inside of a single or double quote. (Pick one. Don’t mix.)</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>var str = "hi i'm a string";
</code></pre></div></div>

<p>Basic operations are <code class="highlighter-rouge">+</code> for concatenation and <code class="highlighter-rouge">.length</code> to get the length of the string.</p>

<p>Other useful operators are <code class="highlighter-rouge">trim</code>, <code class="highlighter-rouge">substr</code>, <code class="highlighter-rouge">charAt</code>, <code class="highlighter-rouge">split</code>, <code class="highlighter-rouge">match</code>, and many many more.</p>

<p><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">Reference</a></p>

<h3 id="arrays">Arrays</h3>

<p>Arrays can be defined in a couple ways.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>var arr = new Array(100);
// or
var arrTwo = [];
</code></pre></div></div>

<p>Access arrays using []</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>var firstElement = arr[0];
</code></pre></div></div>

<p>Arrays have a lot of useful methods like <code class="highlighter-rouge">push</code>, <code class="highlighter-rouge">pop</code>, <code class="highlighter-rouge">shift</code>, <code class="highlighter-rouge">sort</code>, and many more.</p>

<p>What would you hold in an array?</p>

<p><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array">Reference</a></p>

<h3 id="object-literals--maps--dictionaries">Object Literals / Maps / Dictionaries</h3>

<p>Defining an Object:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>var objTwo = {};
</code></pre></div></div>

<p>Accessing data in the object</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>var data = obj.parameter;
var sameData = obj["parameter"];
</code></pre></div></div>

<p>Self referential object.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>var obj.obj = obj;
</code></pre></div></div>

<h4 id="pointers">Pointers</h4>

<p>Everyone is always talking about them. What are they?</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>var a = {
	"data" : "something"
};
var b = a;
b.data = "something else";
a.data; // "something else"
</code></pre></div></div>

<p>What would you hold in a dictionary?</p>

<h3 id="functions">Functions</h3>

<p>Can be defined in a few ways.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>var funky = function(parameter){
	//body
};
// or
function funkyToo(parameter){
	//body
}
</code></pre></div></div>

<p>And later invoked with <code class="highlighter-rouge">()</code></p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>funky("argument");
</code></pre></div></div>

<p>It can just be passed around like any other variable.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>console.log(funky); 
// prints:
function(parameter){
	//body
};
</code></pre></div></div>

<p>Anonymous and immediately invoked functions</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>(function(){
	console.log("i was immediately invoked");
})();
//is subtly, but importantly different from
console.log("i was immediately invoked");
</code></pre></div></div>

<h4 id="scope">Scope</h4>

<p>functions create scope. Scope allows an inside function to see all of it’s parents, but not a parent scope to see anything about the children.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function scopes(){
	var you = "you";
	(function(){
		var me = "me";
		console.log("i can see " + you);
	})();
	console.log(you + "can't see " + me);
}
//this throws an error that 'me' is undefined.
</code></pre></div></div>

<h2 id="servers">SERVERS</h2>

<p>What do servers do?</p>

<ul>
  <li>Client/Server communication</li>
  <li>AJAX</li>
  <li>Store things</li>
  <li>Synchronize multiple pages</li>
</ul>

<h4 id="spinning-up-a-simple-file-server">Spinning up a simple file server</h4>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>python -m SimpleHTTPServer
</code></pre></div></div>

<p>or if you have node and http-server installed:</p>

<p>to install http-server: <code class="highlighter-rouge">npm install -g http-server</code></p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>http-server
</code></pre></div></div>

<p><code class="highlighter-rouge">ctrl + c</code> to kill the server</p>

<h2 id="chrome-tools">CHROME TOOLS</h2>

<p>type <code class="highlighter-rouge">option + command + i</code>. practice it. get used to it. use it often.</p>

<h3 id="console"><code class="highlighter-rouge">console</code></h3>

<p>inspecting variables from the console. type in anything that’s in the current scope and you can see / change it’s value.</p>

<h3 id="logging">logging</h3>

<p>watch out! this is where pointers can bite you. Objects are logged “live” in that they point to the original object, so if you didn’t inspect the values further, you could be looking at the wrong data.</p>

<h3 id="debugger">debugger</h3>

<h4 id="breakpoints">Breakpoints</h4>

<p>step over, step in, step out.</p>

<h4 id="debugger-keyword"><code class="highlighter-rouge">debugger</code> keyword</h4>

<p>put <code class="highlighter-rouge">debugger</code> anywhere in your script and when that line is executed and the console is open,</p>

<h2 id="web-audio-api">WEB AUDIO API</h2>

<h3 id="a-little-history">A little history</h3>

<p>First there were two specs. Web Audio API (pushed by Google) won out over Audio Data API (pushed by Mozilla) because it included natively built components instead of just signal processing in javascript (which at the time especially, JS was not fast enough).</p>

<h3 id="audiocontext">AudioContext</h3>

<p>The AudioContext controls the processing graph. All notes which need to be connected to each other need to be constructed from the same AudioContext.</p>

<p>There is also an OfflineAudioContext which lets you render audio offline faster than real time.</p>

<h3 id="components">Components</h3>

<h4 id="nodes">Nodes</h4>

<p>Web Audio includes nodes such as an oscillator, buffer player, filter, delay, compressor.</p>

<h4 id="audioparams">AudioParams</h4>

<p>AudioParams are like the knobs on an audio module or effect in that they let you adjust and control the parameters of the components. Unlike a knob, you can schedule it to ramp and change in precise ways.</p>

<h2 id="tonejs">Tone.js</h2>

<h3 id="audiocontext-1">AudioContext</h3>

<p>Tone.js generates an AudioContext for you. If you want to set your own so that you can work more easily with another library which also makes the AudioContext for you, use <code class="highlighter-rouge">Tone.setContext</code></p>

<h3 id="sources">Sources</h3>

<p>Aside from the oscillator (Tone.Oscillator) and buffer player (Tone.Player) there is also a noise source, PWM oscillator, pulse oscillator and microphone input.</p>

<h3 id="time"><a href="https://github.com/TONEnoTONE/Tone.js/wiki/Time">Time</a></h3>

<p>Time can be represented in a number of ways in Tone.js.</p>

<h3 id="notes">Notes</h3>

<p>Notes can either be represented as frequencies or by note names: pitch+octave</p>

<p><a href="https://en.wikipedia.org/wiki/Scientific_pitch_notation">Scientific Pitch Notation</a></p>

<h3 id="instruments">Instruments</h3>

<p>These sources combine into a number of instruments each with their own character and settings.</p>

<h4 id="tonesimplesynth">Tone.SimpleSynth</h4>

<p>A single oscillator with an amplitude envelope.</p>

<p>Each instrument has the same API for triggering the attack and release portions of the note.</p>

<p><code class="highlighter-rouge">synth.triggerAttack({Frequency}, {Time});</code></p>

<p><code class="highlighter-rouge">synth.triggerRelease({Time});</code></p>

<p>or combined
<code class="highlighter-rouge">synth.triggerAttack({Frequency}, {Duration}, {Time});</code></p>

<h4 id="example">EXAMPLE:</h4>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">synth</span><span class="p">.</span><span class="nx">triggerAttack</span><span class="p">(</span><span class="s2">"C4"</span><span class="p">);</span>
</code></pre></div></div>

<p><a href="https://jsfiddle.net/yotammann/o387e7d7/">Basic Example</a></p>

<h3 id="player">Player</h3>

<p>Tone.Player takes a buffer as it’s first argument. It can be started, stopped, looped, and change the playback rate.</p>

<p>Wait until the buffer is loaded using <code class="highlighter-rouge">Tone.Buffer.on("load", callback);</code></p>

<p><a href="http://jsfiddle.net/yotammann/hzc9yzbn/6/">Player Example</a></p>

<h4 id="with-jsfiddle-or-codepen">with jsfiddle or codepen</h4>

<p>You’ll need to host your audio files somewhere (preferably with https). For this you can use dropbox if you “get public link”. This link should start with <code class="highlighter-rouge">https://dl.dropboxusercontent.com/</code>. You should be able to feed this link directly into the first argument of Player.</p>

<h3 id="scheduling">Scheduling</h3>

<p>The last argument is the time you want something to happen:</p>

<p><a href="https://jsfiddle.net/yotammann/pxxz7b0h/">Scheduling Example</a></p>

<h3 id="signals">Signals</h3>

<p>Signals are like AudioParams in that you can use them to change values like a knob. They also let you schedule automated events and smoothly ramp between values.</p>

<p>A signal’s value is set using signal.value and it can be automated by scheduling a value at a specific time.</p>

<p><a href="https://jsfiddle.net/yotammann/8mmfcw4v/">Frequency ramping example</a></p>

<h3 id="interaction">Interaction</h3>

<p>This simple example uses jquery to listen for button presses and triggers the note using the “id” of the button element.</p>

<p><a href="https://jsfiddle.net/yotammann/Ln07tnwg/">Triggering with buttons</a></p>

<h2 id="references">REFERENCES</h2>

<p><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide">MDN</a> 
	* watch out because some of the things they reference are speculative or unimplemented. They usually put a little icon next to those things.</p>

<p><a href="http://tonejs.org/docs/">Tone.js docs</a>
<a href="http://chimera.labs.oreilly.com/books/1234000001552/index.html">Web Audio API O’Reilly</a></p>


	<link rel="stylesheet" type="text/css" href="/pcd-delhi-workshop/style/footer.css">
<div id='footnotes'>

</div>
<div id='footer'>
	©2019 PCD, New Delhi <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA </a>
	&
	©2017-2018 Yotam Mann <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA</a>
</div>

	
	<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-90915308-1', 'auto');
  ga('send', 'pageview');

</script>

	<script type="text/javascript">

	// jsfiddle creates too many AudioContexts, 
	// need to insure that the offscreen fiddles are closed
	// to remove the unused AudioContexts

	function isOffScreen (el) {
		var rect = el.getBoundingClientRect();
		return ((rect.left + rect.width) < 0 
			|| (rect.top + rect.height) < 0
			|| (rect.left > window.innerWidth || rect.top > window.innerHeight))
	}

	function reloadIframe(iframe){
		var url = iframe.src
		iframe.src = 'about:blank'
		setTimeout(function() {
			iframe.src = url
		}, 10)
	}

	//test the active elements to see if they are out of the viewport
	setInterval(function(){
		document.querySelectorAll('.active-iframe').forEach(function(el){
			if (isOffScreen(el)){
				reloadIframe(el)
				el.classList.remove('active-iframe')
			}
		})
	}, 1000)

	window.addEventListener('message', function(e){
		// if the results tab was selected
		var resultsTab = e.data[0] === 'resultsFrame'
		var slug = e.data[1].slug
		// get the iframe element using the slug
		document.querySelectorAll('iframe').forEach(function(iframe){
			if (iframe.src.indexOf(slug) !== -1){
				// mark the iframe as active if it's on the results tab
				if (resultsTab){
					iframe.classList.add('active-iframe')
				}
			}
		})
	})
</script>	
</body>
</html>